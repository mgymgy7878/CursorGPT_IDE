# v1.2 BTCTurk+BIST Backlog

## BTCTurk Spot Entegrasyonu

### REST API
- [ ] Nonce yönetimi (timestamp + counter)
- [ ] HMAC-SHA256 imzalama
- [ ] 429 backoff stratejisi
- [ ] Saat senkronizasyonu

### Enstrüman Eşleme
- [ ] BTC_TRY, USDT_TRY → iç sembol tablosu
- [ ] Sembol normalizasyonu
- [ ] Lot size ve tick size mapping

### Gerçek Place→ACK Ölçümü
- [ ] Order create → ack stopwatch
- [ ] Labels: exchange, symbol, route
- [ ] P95 metriği: `spark_place_ack_duration_seconds_bucket`

## BIST Feed

### Seans Yönetimi
- [ ] TR yerel saat hesaplama
- [ ] Tatil günleri kontrolü
- [ ] Açılış/kapanış gap kuralları

### Sembol Normalizasyonu
- [ ] GARAN.E, THYAO.E → iç format
- [ ] Feed → DB P95 metriği
- [ ] Hedef: `spark_feed_to_db_seconds_bucket < 300ms`

## Guardrails

### Kill-Switch
- [ ] Env flag kontrolü
- [ ] Whitelist yönetimi
- [ ] Max notional/second caps

### Dry-Run Modu
- [ ] Emir imzası var ama borsaya göndermez
- [ ] P95 yine ölçülür
- [ ] Test ortamında güvenli

## Sertleştirmeler

### Renovate
- [ ] Next 14.2.4 pin
- [ ] Tailwind v3 pin
- [ ] Major/minor ignore, patch only

### Case-Sensitive Import
- [ ] `git config core.ignorecase false`
- [ ] ESLint `import/no-unresolved`

### Smoke Genişleme
- [ ] `/api/version` → tag/sha doğrula
- [ ] `/metrics`'te `_count > 0`
- [ ] Executor version endpoint

## Milestone Hedefleri

### M1: BTCTurk REST (1 hafta)
- Temel REST entegrasyonu
- Nonce ve imzalama
- Test emirleri

### M2: BIST Feed (1 hafta)
- Feed normalizasyonu
- Seans yönetimi
- DB entegrasyonu

### M3: Production Ready (1 hafta)
- Guardrails
- Kill-switch
- Monitoring

## Success Criteria
- P95 < 1000ms (live orders)
- 99.9% uptime
- Zero data loss
- < 300ms feed latency
