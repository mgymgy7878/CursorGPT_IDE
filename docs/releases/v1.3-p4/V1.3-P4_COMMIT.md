# V1.3-P4 Commit Message

```
feat(health): add metric-based health logic + tests; jest setup [P4 Core]

Core:
- Add getHealthStatus() with error_rate/staleness/uptime thresholds
- Add health.test.ts (13 tests) + format.test.ts coverage
- Setup Jest + @types/jest + ts-jest
- Add jest.config.js with @/ path mapping

Quick Wins:
- Migrate DataModeBadge to StatusBadge (Real/Mock)
- Migrate DraftsBadge to StatusBadge (Drafts count)

Tests: 29/29 PASS
i18n: 40 keys OK
TypeCheck: P4 files clean (WS errors pre-existing, P5)

Files Changed (5):
- apps/web-next/jest.config.js
- apps/web-next/src/lib/health.ts
- apps/web-next/src/lib/health.test.ts
- apps/web-next/src/components/ui/DataModeBadge.tsx
- apps/web-next/src/components/dashboard/DraftsBadge.tsx

P5 Scope:
- SLOChip migration (complex, metric logic separation needed)
- Canary/Health card integration
- WS exponential backoff + log throttle
```

## Git Commands

```bash
cd C:\dev

# Branch
git checkout -b feature/v1.3-p4-health-viz

# Stage
git add apps/web-next/jest.config.js
git add apps/web-next/src/lib/health.ts
git add apps/web-next/src/lib/health.test.ts
git add apps/web-next/src/components/ui/DataModeBadge.tsx
git add apps/web-next/src/components/dashboard/DraftsBadge.tsx
git add apps/web-next/package.json

# Commit
git commit -F docs/releases/v1.3-p4/V1.3-P4_COMMIT.md

# Push
git push origin feature/v1.3-p4-health-viz
```

