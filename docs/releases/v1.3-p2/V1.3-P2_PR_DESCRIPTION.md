# V1.3-P2 • UI Polish Pack (8 fixes)

## 📋 Özet
8 maddelik UI tutarlılık ve cilalama paketi—sayısal metin formatı, i18n eksiklikleri, FAB çakışması, ve Tailwind renk token standardizasyonu.

## 🎯 Sorun ve Çözümler

| Sorun | Çözüm | Etki |
|-------|-------|------|
| Sayılar aralı görünüyor ("1. 247, 50 $") | `.num-tight` utility (letter-spacing: 0, tabular-nums) | Dashboard KPI, Portfolio tablolar |
| "⌘K Commands" / "⌘K Komutlar" tutarsız | OS tespiti (`isMac()`) + i18n anahtarları | FAB tüm sayfalarda |
| FAB sağ panel alt düğmeleriyle çakışıyor | Sidebar `pb-40 md:pb-44` + safe-area | Dashboard/Portfolio |
| "Connected/Active" İngilizce kalmış | `t('status.connected/active')` i18n | Portfolio kartları |
| USD formatı karışık (EN/TR) | `formatCurrency(value, 'tr-TR', 'USD')` → "42.500,00 $" | Portfolio tablo sütunları |
| Durum renkleri hard-coded | `colors.status.*` Tailwind token'ları | Tailwind config |

## 🔧 Değişiklikler

### 1. Globals CSS - `.num-tight` Utility
```css
.num-tight {
  font-variant-numeric: tabular-nums lining-nums;
  letter-spacing: 0;
  white-space: nowrap;
}
```
**Kullanım:** Tüm para birimi, metrik, yüzdelik gösterimlerinde.

### 2. i18n Anahtarları
```typescript
common: {
  cmdk_mac: "⌘K Komutlar",
  cmdk_win: "Ctrl+K Komutlar",
},
status: {
  connected: "Bağlı",
  active: "Aktif",
  paused: "Duraklatıldı",
  error: "Hata",
}
```

### 3. Tailwind Status Tokens
```typescript
colors: {
  status: {
    success: { DEFAULT: '#10B981', fg: '#052e1f' },
    warn: { DEFAULT: '#F59E0B', fg: '#3a2500' },
    error: { DEFAULT: '#EF4444', fg: '#3b0a0a' },
    info: { DEFAULT: '#3B82F6', fg: '#0a153b' },
    neutral: { DEFAULT: '#6B7280', fg: '#111827' },
  },
}
```
**Kullanım:** `bg-status-success`, `text-status-error-fg`

### 4. FAB (FloatingActions)
- **OS Tespiti:** `isMac()` helper → macOS'ta "⌘K", Windows'ta "Ctrl+K"
- **Safe-area:** `bottom: max(24px, env(safe-area-inset-bottom, 24px))`
- **i18n:** `t('common.cmdk_mac')` / `t('common.cmdk_win')`

### 5. Portfolio & Dashboard
- **EN→TR:** "Connected" → "Bağlı", "Active" → "Aktif"
- **USD Format:** `formatCurrency(value, 'tr-TR', 'USD')` → tutarlı TR locale
- **num-tight:** Tüm sayısal değerlerde uygulandı
- **Sidebar:** `pb-40 md:pb-44` ile FAB çakışması önlendi

### 6. Metric Component
- **className prop:** Opsiyonel `className` desteği eklendi
- **Kullanım:** `<Metric ... className="num-tight" />`

## ✅ Test Sonuçları

| Test | Sonuç |
|------|-------|
| TypeScript (`pnpm typecheck`) | ✅ 0 error |
| Linter | ✅ 0 warning |
| Dev Server | ✅ http://localhost:3003 |
| Build | 🔄 Pending (CI'da) |

## 📸 Önce/Sonra (Ekran Görüntüleri)

### Dashboard - KPI Kartları
**Önce:** "58 ms" ile "0 sn" farklı genişliklerde, sayılar dans ediyor  
**Sonra:** `num-tight` ile hizalı, kompakt

### Portfolio - Tablo
**Önce:** "$42,500" (EN) + "Connected" (EN)  
**Sonra:** "42.500,00 $" (TR) + "Bağlı" (TR)

### FAB - OS Aware
**Önce:** Her yerde "⌘K Komutlar"  
**Sonra:** macOS'ta "⌘K Komutlar", Windows'ta "Ctrl+K Komutlar"

### Sağ Panel
**Önce:** FAB ile "Ops Hızlı Yardım" butonu çakışıyor  
**Sonra:** `pb-40 md:pb-44` ile güvenli alan

## 🔍 Manuel QA Checklist

- [ ] Dashboard → P95/Staleness sayılar hizalı
- [ ] Dashboard → Sağ sidebar FAB ile çakışmıyor
- [ ] Portfolio → "Bağlı", "Aktif" Türkçe
- [ ] Portfolio → USD format "42.500,00 $"
- [ ] Strategy Lab → EN chip şeridi yok
- [ ] FAB → macOS/Windows label doğru
- [ ] Mobile/iOS → safe-area-inset etkin
- [ ] Dark/Light → kontrast korunuyor
- [ ] 1024–1440 px → taşma yok

## 🚀 Deployment Notes

- **Zero Breaking Changes:** Mevcut bileşenler geriye uyumlu
- **CSS Utility:** `.num-tight` global, tüm sayfalarda kullanılabilir
- **Tailwind Tokens:** `status.*` P3'te alert/chip'lerde kullanılacak
- **i18n:** Eksik anahtarlar runtime'da boş string döner (hata atmaz)

## 📦 Değişen Dosyalar (8)

1. `apps/web-next/src/app/globals.css`
2. `apps/web-next/src/lib/i18n.ts`
3. `apps/web-next/tailwind.config.ts`
4. `apps/web-next/src/components/layout/FloatingActions.tsx`
5. `apps/web-next/src/app/portfolio/page.tsx`
6. `apps/web-next/src/components/portfolio/OptimisticPositionsTable.tsx`
7. `apps/web-next/src/app/dashboard/page.tsx`
8. `apps/web-next/src/components/ui/Metric.tsx`

## 🎯 Rollback Plan

**Geri Alma:**
```bash
git revert <commit-sha>
# veya
git checkout main -- apps/web-next/src/app/globals.css apps/web-next/src/lib/i18n.ts ...
```

**Risk Profili:** Düşük
- i18n anahtarı eksikliği → runtime boş string (UI bozulmaz)
- safe-area fallback → Android WebView'da farklı davranabilir
- `num-tight` → bazı fontlarda sorun olursa kaldır

## 🔗 İlgili Issue/PR

- İlgili Issue: #[ISSUE_NUMBER]
- Önceki PR: V1.3-P1 (eğer varsa)
- Sonraki PR: V1.3-P3 UI-Guardrails Harmonization

## 👥 Reviewer Checklist

- [ ] TypeCheck geçiyor
- [ ] Lint temiz
- [ ] i18n anahtarları TR/EN'de var
- [ ] Tailwind config compile oluyor
- [ ] Manuel QA (yukarıdaki checklist)
- [ ] Önce/Sonra screenshot'lar incelendi

---

**Review sonrası:** Squash merge → main
**Post-merge:** CI'da snapshot update + Storybook rebuild

