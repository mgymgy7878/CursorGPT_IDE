# V1.3-P3 • UI-Guardrails Harmonization — KICKOFF

**Durum:** 🟡 Planning  
**Tarih Başlangıç:** TBD (P2 merge sonrası)  
**Tahmini Süre:** 4-6 gün  
**Branch:** `feature/v1.3-p3-ui-guardrails`

## 🎯 Hedefler

1. **StatusBadge Unification** → Tek durum göstergesi bileşeni
2. **i18n CI Gate** → TR/EN anahtar paritesi otomatik kontrolü
3. **Format Helper Tests** → Jest coverage %100
4. **Settings Polish** → i18n tamamlanması

## 📦 Atomik Adımlar

### 1️⃣ StatusBadge Bileşeni
**Dosya:** `apps/web-next/src/components/ui/StatusBadge.tsx`

```typescript
interface StatusBadgeProps {
  status: 'success' | 'warn' | 'error' | 'info' | 'neutral';
  label: string;
  size?: 'sm' | 'md' | 'lg';
  icon?: ReactNode;
}

// Tailwind colors.status.* kullanır (P2'de eklendi)
```

**Migration:**
- Alert chip → StatusBadge
- SLOChip → StatusBadge
- Guardrail status → StatusBadge

**Commit:** `feat(ui): add unified StatusBadge using status.* tokens`

---

### 2️⃣ i18n Parity Check
**Dosya:** `scripts/i18n-check.mjs`

```javascript
// TR/EN JSON karşılaştırma
// Eksik anahtarları raporla
// Exit code: 0 (OK) | 1 (mismatch)
```

**NPM Script:**
```json
{
  "scripts": {
    "i18n:check": "node scripts/i18n-check.mjs"
  }
}
```

**CI Step:** `.github/workflows/ci.yml`
```yaml
- name: i18n Parity Check
  run: pnpm run i18n:check
```

**Commit:** `chore(i18n): add parity check script + CI step`

---

### 3️⃣ Format Helper Tests
**Dosya:** `apps/web-next/src/lib/format.test.ts`

**Test Senaryoları:**
- ✅ Pozitif sayılar (TR/EN locale)
- ✅ Negatif sayılar
- ✅ Sıfır
- ✅ Çok büyük sayılar (1M+)
- ✅ Kesirli sayılar
- ✅ null/undefined handling

**Coverage Hedefi:** %100 (`format.ts`)

**Commit:** `test(format): add full coverage for format helpers`

---

### 4️⃣ Settings i18n Polish
**Dosya:** `apps/web-next/src/app/settings/page.tsx`

**Değişiklikler:**
- "(light)" → "(aydınlık)" i18n
- Tema seçici label'ları
- Dil seçici UX iyileştirme

**i18n Anahtarları:**
```typescript
settings: {
  theme: {
    dark: "Karanlık",
    light: "Aydınlık",
    system: "Sistem",
  },
  language: {
    tr: "Türkçe",
    en: "English",
  },
}
```

**Commit:** `feat(settings): i18n polish (tr/en labels)`

---

## ✅ Kabul Kriterleri

| Kriter | Hedef | Doğrulama |
|--------|-------|-----------|
| StatusBadge migration | %100 | grep ile eski chip kullanımı yok |
| i18n parity | TR/EN eşit | CI check geçiyor |
| Format tests | %100 coverage | Jest report |
| Settings i18n | EN literal yok | Manuel QA |

## 🧪 Doğrulama (Smoke)

```bash
# Build
pnpm -w build

# Dev server
pnpm --filter web-next dev --port 3003

# Sayfalar
# - /dashboard → StatusBadge tutarlı renk
# - /portfolio → StatusBadge tutarlı renk
# - /strategy-lab → StatusBadge tutarlı renk
# - /settings → Tema/dil i18n

# Tests
pnpm --filter web-next test

# i18n check
pnpm run i18n:check
```

## 📊 Başarı Metrikleri

- **Bileşen Sayısı:** 1 StatusBadge (3-4 eski chip kaldırıldı)
- **Test Coverage:** format.ts %100
- **i18n Keys:** TR/EN parity %100
- **Build Size:** +2 KB max

## ⚠️ Riskler & Azaltma

| Risk | Olasılık | Azaltma |
|------|----------|---------|
| Eski chip kullanımı kaldı | Orta | grep scan + deprecation warning |
| i18n check false positive | Düşük | Whitelist mekanizması |
| Test edge case eksik | Orta | Comprehensive test suite |

## 🚀 Rollout Planı

1. **Alpha:** StatusBadge + i18n check (1-2 gün)
2. **Beta:** Migration + format tests (2-3 gün)
3. **RC:** Settings polish + QA (1 gün)
4. **Final:** PR review + merge

**Toplam:** 4-6 gün

---

## 📝 Ön Hazırlık

- [ ] P2 PR merge edildi
- [ ] Issue oluşturuldu: "V1.3-P3 UI-Guardrails Harmonization"
- [ ] Sprint planlama toplantısı
- [ ] Design review (StatusBadge varyasyonları)

## 🔗 İlgili Kaynaklar

- [P2 Release](./v1.3-p2/README.md)
- [P3 Plan Detay](./V1.3-P3_PLAN_DRAFT.md)
- Tailwind Docs: [Custom Colors](https://tailwindcss.com/docs/customizing-colors)
- Jest Docs: [Coverage](https://jestjs.io/docs/configuration#collectcoverage-boolean)

---

**Durum:** DRAFT → P2 merge sonrası ACTIVE olacak
