{
  "title": "Spark â€” Release Ops",
  "time": {
    "from": "now-1h",
    "to": "now"
  },
  "panels": [
    {
      "id": 1,
      "type": "graph",
      "title": "Private Calls / Errors",
      "targets": [
        {
          "expr": "rate(spark_private_calls_total[5m])",
          "legendFormat": "Calls/sec"
        },
        {
          "expr": "rate(spark_private_errors_total[5m])",
          "legendFormat": "Errors/sec"
        }
      ]
    },
    {
      "id": 2,
      "type": "graph",
      "title": "TWAP Slices",
      "targets": [
        {
          "expr": "rate(spark_twap_slice_sent_total[5m])",
          "legendFormat": "Slices/sec"
        }
      ]
    },
    {
      "id": 3,
      "type": "stat",
      "title": "WS Disconnects (15m)",
      "targets": [
        {
          "expr": "increase(spark_ws_disconnects_total[15m])",
          "legendFormat": "Disconnects"
        }
      ]
    },
    {
      "id": 4,
      "type": "graph",
      "title": "Risk Breaches",
      "targets": [
        {
          "expr": "increase(spark_risk_breach_total[1h])",
          "legendFormat": "Breaches"
        }
      ]
    },
    {
      "id": 5,
      "type": "graph",
      "title": "PnL (Unrealized)",
      "targets": [
        {
          "expr": "spark_pnl_unrealized",
          "legendFormat": "Unrealized PnL"
        }
      ]
    },
    {
      "id": 6,
      "type": "graph",
      "title": "Order Success Rate",
      "targets": [
        {
          "expr": "(rate(spark_orders_success_total[5m]) / clamp_min(rate(spark_orders_total[5m]), 1e-9)) * 100",
          "legendFormat": "Success %"
        }
      ]
    },
    {
      "id": 7,
      "type": "stat",
      "title": "Active Connections",
      "targets": [
        {
          "expr": "spark_ws_connections_active",
          "legendFormat": "Connections"
        }
      ]
    },
    {
      "id": 8,
      "type": "graph",
      "title": "API Response Time",
      "targets": [
        {
          "expr": "histogram_quantile(0.95, rate(spark_api_duration_seconds_bucket[5m]))",
          "legendFormat": "95th percentile"
        }
      ]
    },
    {
      "id": 9,
      "type": "graph",
      "title": "Queue Lag",
      "targets": [
        {
          "expr": "spark_queue_enqueued_total - spark_queue_processed_total",
          "legendFormat": "Pending Jobs"
        }
      ]
    },
    {
      "id": 10,
      "type": "stat",
      "title": "WS Flap Events",
      "targets": [
        {
          "expr": "increase(spark_ws_disconnects_total[15m])",
          "legendFormat": "Flaps"
        }
      ]
    },
    {
      "id": 11,
      "type": "graph",
      "title": "Shadow-Live Latency",
      "targets": [
        {
          "expr": "histogram_quantile(0.95, rate(spark_shadow_latency_ms_bucket[5m]))",
          "legendFormat": "95th percentile (ms)"
        }
      ]
    },
    {
      "id": 12,
      "type": "stat",
      "title": "Chaos Recovery",
      "targets": [
        {
          "expr": "rate(spark_chaos_recovery_total[5m])",
          "legendFormat": "Recoveries/sec"
        }
      ]
    },
    {
      "id": 9,
      "type": "graph",
      "title": "Signal Processing Rate",
      "targets": [
        {
          "expr": "rate(spark_signal_processed_total[5m])",
          "legendFormat": "Signals/sec"
        },
        {
          "expr": "rate(spark_signal_errors_total[5m])",
          "legendFormat": "Errors/sec"
        }
      ]
    },
    {
      "id": 10,
      "type": "stat",
      "title": "Emergency Stop Status",
      "targets": [
        {
          "expr": "spark_emergency_stop_active",
          "legendFormat": "Emergency Stop"
        }
      ]
    },
    {
      "id": 11,
      "type": "graph",
      "title": "48h Report Pipeline",
      "targets": [
        {
          "expr": "increase(spark_report_runs_total[1h])",
          "legendFormat": "Report Runs"
        },
        {
          "expr": "increase(spark_report_errors_total[1h])",
          "legendFormat": "Report Errors"
        }
      ]
    },
    {
      "id": 12,
      "type": "graph",
      "title": "Report Success Rate",
      "targets": [
        {
          "expr": "1 - (rate(spark_report_errors_total[30m]) / clamp_min(rate(spark_report_runs_total[30m]), 1e-9))",
          "legendFormat": "Success Rate"
        }
      ]
    },
    {
      "id": 13,
      "type": "stat",
      "title": "Feature Store Performance",
      "targets": [
        {
          "expr": "spark_feature_store_signals_total",
          "legendFormat": "Stored Signals"
        },
        {
          "expr": "spark_feature_store_patterns_total",
          "legendFormat": "Patterns Analyzed"
        }
      ]
    },
    {
      "id": 14,
      "type": "graph",
      "title": "Risk Guard Metrics",
      "targets": [
        {
          "expr": "increase(spark_risk_breach_total[1h])",
          "legendFormat": "Risk Breaches"
        },
        {
          "expr": "spark_daily_trades_count",
          "legendFormat": "Daily Trades"
        }
      ]
    }
  ]
} 