# SPARK V1.2.1 - QA CHECKLIST & SHIP APPROVAL

**Version:** v1.2.1  
**QA Date:** 2025-01-17  
**Status:** ⏳ READY FOR FINAL REVIEW

---

## ✅ 1. GÖRSEL/YERLEŞİM

### Dashboard
- ⬜ **Sticky Sidebar Test**
  - Scroll to bottom → Right panel stays visible
  - FloatingActions no overlap with sidebar
  - Bottom padding (pb-32) sufficient
  
- ⬜ **StatusPills**
  - Shows: "Ortam: Deneme • Veri Akışı: Sağlıklı • Aracı: Çevrimdışı"
  - All text in Turkish
  - Proper color coding (green/amber/red)

- ⬜ **Metrics**
  - Two equal-height cards
  - "P95 gecikme" and "Güncellik gecikmesi"
  - Hints visible: "Hedef: 1200 ms", "Eşik: 30 sn"

### Strategy Lab
- ⬜ **StatusPills Present**
  - Same format as Dashboard
  - TR localization consistent
  
- ⬜ **Empty State**
  - Placeholder: "Başlamak için bir strateji isteği yazın..."
  - Button disabled when prompt empty
  - Textarea min-height: 160px

- ⬜ **Tabs**
  - font-medium styling
  - Clear visual hierarchy

### Portfolio
- ⬜ **Currency Format**
  - Shows: "12.847,50 $" (not "$12,847.50")
  - Narrow no-break space (U+202F) between number and symbol
  - No line breaks in currency values

- ⬜ **Tabular Numbers**
  - All numbers use .tabular class
  - Numbers don't shift when values change
  - whitespace-nowrap prevents wrapping

- ⬜ **PnL Colors**
  - Positive: emerald-400 (green)
  - Negative: red-400 (red)
  - Monospace font for consistency

---

## ✅ 2. TERMİNOLOJİ/i18n

### TR Button Labels
- ⬜ "Pozisyonu Kapat" (not "İşlemi Kapat")
- ⬜ "Ters Pozisyon Aç" (not "Tersine Çevir")
- ⬜ "Kanıtı Aç" (not "Kanıta Git")
- ⬜ "Son Canary Testi" (not "Son Canary Smoke")
- ⬜ "Alarmdan Taslak Oluştur" (not "Alarmdan Taslak")

### Status Text
- ⬜ "Ortam" (not "Env")
- ⬜ "Veri Akışı" (not "Feed")
- ⬜ "Aracı" (not "Broker")
- ⬜ "Sağlıklı" (not "Healthy")
- ⬜ "Çevrimdışı" (not "Offline")
- ⬜ "Deneme" (not "Mock")

### Empty States
- ⬜ "Henüz veri yok." (not "—" or "N/A")

### Time Text
- ⬜ "24 saat P&L" (not "24h P&L" or "24s P&L")

---

## ✅ 3. ERİŞİLEBİLİRLİK

### Keyboard Navigation
- ⬜ Tab through all interactive elements
- ⬜ Focus rings visible (2px green outline)
- ⬜ Enter/Space activate buttons
- ⬜ Esc closes modals/menus

### Screen Reader
- ⬜ aria-live on PnL updates
- ⬜ aria-label on FloatingActions
- ⬜ aria-label on individual buttons
- ⬜ Proper heading hierarchy (h1 → h2 → h3)

### Contrast
- ⬜ Text/background: ≥ 4.5:1 (WCAG AA)
- ⬜ Focus indicators: ≥ 3:1
- ⬜ Color not sole indicator (text + icons)

---

## ✅ 4. HATA DURUMLARI

### Data Loading
- ⬜ Dashboard: Shows skeleton or "Henüz veri yok."
- ⬜ No React error boundary triggers
- ⬜ No console errors

### Empty Prompt
- ⬜ Strategy Lab: Button disabled
- ⬜ Helpful placeholder text visible
- ⬜ No submit on Enter when empty

### Network Errors
- ⬜ Graceful degradation
- ⬜ User-friendly error messages (TR)
- ⬜ Retry mechanism (if applicable)

---

## ✅ 5. OTOMASYON

### Build
```bash
cd C:\dev\apps\web-next
pnpm typecheck  # → 0 errors
pnpm build      # → SUCCESS
```

### Visual Tests
```bash
pnpm exec playwright test
# Expected: 5/5 PASS
# - dashboard overlap test
# - portfolio currency test
# - strategy-lab placeholder test
# - floating actions desktop test
# - floating actions mobile test
```

### Lighthouse (Optional)
```bash
# Run on http://127.0.0.1:3003/dashboard
# Target metrics:
# - CLS: ≤ 0.1 (currently ~0.00)
# - Accessibility: ≥ 90
# - Best Practices: ≥ 90
```

---

## 🎯 SHIP CRITERIA

### Must Have (Blocking)
- ✅ TypeScript: 0 errors
- ✅ Build: SUCCESS
- ✅ All pages: 200 OK
- ✅ PM2: 4/4 online
- ⬜ Visual QA: Dashboard, Portfolio, Strategy Lab
- ⬜ i18n: 100% TR (no EN strings)
- ⬜ Accessibility: Keyboard + screen reader

### Nice to Have (Non-blocking)
- ⬜ Playwright: 5/5 PASS
- ⬜ Lighthouse: CLS < 0.1, A11y > 90
- ⬜ No console warnings
- ⬜ Mobile responsive check

---

## 📦 SHIP COMMAND

```bash
cd C:\dev

# Tag release
git tag v1.2.1
git push origin v1.2.1

# Create release notes
echo "V1.2.1 - Production UI/UX Complete
- Core components (PageHeader, StatusPills, FloatingActions, Metric)
- 100% TR localization (typed i18n)
- Professional formatting (TR currency, tabular numbers)
- Zero overlaps (responsive FloatingActions)
- Accessibility (aria-live, focus rings)
- Visual regression tests (Playwright)" > RELEASE_NOTES_v1.2.1.txt

# PM2 production config
pm2 save
pm2 startup  # if not already configured
```

---

## 🚀 POST-SHIP MONITORING

### First 24 Hours
- ⬜ Check PM2 restart counts (should be stable)
- ⬜ Monitor browser console errors (should be zero)
- ⬜ User feedback on TR terminology
- ⬜ Mobile device testing (iOS Safari, Android Chrome)

### First Week
- ⬜ Lighthouse scores stable
- ⬜ No layout regressions
- ⬜ i18n working across all pages
- ⬜ FloatingActions no overlap reports

---

## ❌ ROLLBACK PLAN

### If Issues Found

**Quick Rollback:**
```bash
cd C:\dev\apps\web-next\src\app\dashboard
mv page.tsx page-v1.2.1.tsx
mv page-old.tsx page.tsx
pm2 restart spark-web-next
```

**Full Rollback:**
```bash
git revert HEAD~7  # Revert last 7 commits (Sprint 1 + P1 + P2 + P3)
pnpm build
pm2 restart spark-web-next
```

**Evidence:**
```bash
mkdir -p evidence/rollback_$(date +%Y%m%d_%H%M%S)
cp -r .next/ evidence/rollback_*/
pm2 jlist > evidence/rollback_*/pm2_status.json
```

---

*Ready for final QA review and ship approval* ✅🚀

